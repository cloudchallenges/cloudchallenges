---
title: "Solution: Intro to AWS IAM"
challenge_uid: "iam-001"
solution_repo: "https://github.com/cloudchallenges/iam-solution"
tool: "Terraform"
status: "complete"
notes: "This solution uses Terraform to automate IAM user and group creation with best practices."
created_at: "2025-11-22"
---

This solution demonstrates how to set up IAM users, groups, and policies using Terraform.

## Solution Overview

We'll create a reusable Terraform module that:
- Creates an IAM group called `developers`
- Creates an IAM user called `challenge-user`
- Attaches the `AmazonS3ReadOnlyAccess` managed policy
- Adds the user to the group

## Terraform Configuration

### Provider Setup

```hcl
terraform {
  required_providers {
    aws = {
      source  = "hashicorp/aws"
      version = "~> 5.0"
    }
  }
}

provider "aws" {
  region = "us-east-1"
}
```

### IAM Resources

```hcl
# Create the developers group
resource "aws_iam_group" "developers" {
  name = "developers"
}

# Attach the S3 read-only policy to the group
resource "aws_iam_group_policy_attachment" "developers_s3_readonly" {
  group      = aws_iam_group.developers.name
  policy_arn = "arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"
}

# Create the challenge user
resource "aws_iam_user" "challenge_user" {
  name = "challenge-user"

  tags = {
    Purpose = "Cloud Challenge"
    ManagedBy = "Terraform"
  }
}

# Add the user to the developers group
resource "aws_iam_user_group_membership" "challenge_user_membership" {
  user   = aws_iam_user.challenge_user.name
  groups = [aws_iam_group.developers.name]
}
```

## Key Decisions

1. **Terraform over CLI**: While the CLI works for one-time setup, Terraform provides reproducibility and state management.

2. **Managed Policy**: Using AWS managed policies ensures we get security updates automatically.

3. **Tags**: Adding tags helps with cost tracking and resource organization.

## Cleanup

To destroy all resources:

```bash
terraform destroy
```

## What You Learned

- How to create IAM users and groups with Terraform
- How to attach managed policies
- Best practices for IAM resource naming and tagging
