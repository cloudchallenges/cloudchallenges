---
import { getCollection, render } from "astro:content";
import type {
    ChallengeEntry,
    ChallengePath,
    ChallengeDetailPageProps,
} from "@/lib/types";
import ChallengeLayout from "@/layouts/ChallengeLayout.astro";
import MdxImage from "@/components/media/MdxImage.astro";

export async function getStaticPaths() {
    const entries = await getCollection("challenges");

    const paths: ChallengePath[] = entries.map((entry: ChallengeEntry) => ({
        params: { slug: entry.id },
        props: { entry },
    }));

    return paths;
}
const { entry: challenge } = Astro.props as ChallengeDetailPageProps;
const { Content, headings = [] } = await render(challenge);

const components = {
    img: MdxImage,
};
---

<ChallengeLayout entry={challenge} activeTab="challenge" headings={headings}>
    <Content components={components} />
</ChallengeLayout>
